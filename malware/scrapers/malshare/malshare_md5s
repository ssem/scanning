#!/usr/bin/env python
import argparse
import requests

def pull(dst):
    of = open(dst, 'w+')
    http = requests.get(url='http://malshare.com/daily/')
    for line in http.content.split('\n'):
        date = line.split('href="')[-1].split('/">')[0]
        if '-' in date and 'align' not in date:
            link = '%s/malshare_fileList.%s.txt' % (date, date)
            http = requests.get(url='http://malshare.com/daily/%s' % link)
            of.write(http.content)
    of.close()

if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('dst', help='path to output file')
    args = parser.parse_args()
    pull(args.dst)
